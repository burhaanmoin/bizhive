// Variables
$primary-color: #1976d2;
$secondary-color: #dc004e;
$success-color: #4caf50;
$warning-color: #ff9800;
$error-color: #f44336;
$info-color: #2196f3;
$purple-color: #9c27b0;
$background-color: #f5f5f5;
$card-background: #fff;
$text-primary: #333;
$text-secondary: #666;
$border-color: #e0e0e0;
$transition-duration: 0.3s;

// Typography
$font-weight-light: 300;
$font-weight-regular: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

// Spacing
$spacing-unit: 8px;
$spacing-xs: $spacing-unit;
$spacing-sm: $spacing-unit * 2;
$spacing-md: $spacing-unit * 3;
$spacing-lg: $spacing-unit * 4;
$spacing-xl: $spacing-unit * 5;

// Breakpoints
$breakpoint-xs: 0;
$breakpoint-sm: 600px;
$breakpoint-md: 960px;
$breakpoint-lg: 1280px;
$breakpoint-xl: 1920px;

// Shadows
$shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
$shadow-md: 0 4px 6px rgba(0, 0, 0, 0.15);
$shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.18);

// Border Radius
$border-radius-sm: 4px;
$border-radius-md: 8px;
$border-radius-lg: 12px;

// Mixins
@mixin card-hover {
  transition: all $transition-duration ease;
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }
}

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin section-padding {
  padding: $spacing-lg;
  margin-bottom: $spacing-xl;
}

// Add upscale, premium, and modern tweaks for a consistent look with Home page
$background-gradient: linear-gradient(135deg, #f7fbff 0%, #e0f2fe 100%);

// Beautiful, premium dashboard enhancements
$sidebar-gradient: linear-gradient(135deg, #e3f0ff 0%, #b6d0f7 100%);
$content-gradient: linear-gradient(135deg, #f7fbff 0%, #e0f2fe 100%);
$card-gradient: linear-gradient(135deg, #f7fbff 0%, #e3f0ff 100%);
$accent-bar: #1976d2;

// Main Dashboard Styles
.msme-dashboard {
  background: $content-gradient;
  min-height: 100vh;
  padding: 40px 0;
  
  // App Bar
  .app-bar {
    background: #fff;
    box-shadow: 0 4px 24px rgba($primary-color, 0.08);
    border-bottom: 2px solid #e3f0ff;
    
    .toolbar-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 18px;
    }
    
    .menu-button {
      margin-right: 16px;
    }
    
    .title {
      font-weight: 800;
      font-size: 2.1rem;
      color: $primary-color;
      letter-spacing: 0.5px;
    }
    
    .profile-button {
      text-transform: none;
      font-weight: 600;
      
      .avatar {
        margin-right: 8px;
        width: 32px;
        height: 32px;
        border: 2px solid #e3f0ff;
      }
    }
  }
  
  // Drawer / Sidebar
  .drawer {
    width: 220px;
    .MuiDrawer-paper {
      width: 220px;
      background: $sidebar-gradient;
      border-radius: 0 24px 24px 0;
      box-shadow: 0 8px 32px rgba($primary-color, 0.13);
      border-right: none;
      padding-top: 12px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }
    .drawer-header {
      display: flex;
      align-items: center;
      padding: 24px 16px 16px 24px;
      .sidebar-logo {
        display: flex;
        align-items: center;
        gap: 14px;
        img {
          width: 44px;
          height: 44px;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba($primary-color, 0.10);
        }
        .MuiTypography-h6 {
          font-weight: 800;
          font-size: 1.5rem;
          color: $primary-color;
        }
        .sidebar-tagline {
          font-size: 0.95rem;
          color: $text-secondary;
          margin-left: 2px;
        }
      }
    }
    .drawer-list {
      margin-top: 16px;
      .MuiListItem-root {
        border-radius: 16px;
        margin-bottom: 10px;
        padding: 12px 18px;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        .MuiListItemIcon-root {
          min-width: 0;
          margin-right: 16px;
          background: #e3f0ff;
          border-radius: 50%;
          padding: 8px;
          color: $primary-color;
          font-size: 1.5rem;
        }
        &.Mui-selected {
          background: $primary-color;
          color: #fff;
          box-shadow: 0 4px 16px rgba($primary-color, 0.13);
          .MuiListItemIcon-root {
            background: #fff;
            color: $primary-color;
            box-shadow: 0 2px 8px rgba($primary-color, 0.10);
          }
          .MuiListItemText-primary {
            color: $primary-color;
            font-weight: 700;
          }
        }
        &:hover {
          background: #e3f0ff;
          color: $primary-color;
        }
      }
    }
    .drawer-footer {
      margin-top: auto;
      padding: 20px 16px;
      border-top: 1px solid #e3f0ff;
      .MuiButton-root {
        width: 100%;
        justify-content: flex-start;
        border-radius: 30px;
        font-weight: 600;
        background: linear-gradient(90deg, $primary-color 60%, #64b5f6 100%);
        color: #fff;
        box-shadow: 0 2px 8px rgba($primary-color, 0.10);
        &:hover {
          background: $primary-color;
          color: #fff;
        }
      }
    }
  }
  
  // Main Content
  .content {
    margin-left: 220px;
    width: calc(100% - 220px);
    transition: margin 0.3s, width 0.3s;
    background: $content-gradient;
    min-height: 100vh;
    padding-top: 90px;
    
    .dashboard-container {
      padding: 40px 24px 32px 24px;
      background: transparent;
    }
  }
  
  // Section Styles
  .section-grid {
    margin-bottom: 24px;
  }
  
  .section-title {
    font-size: 2.2rem;
    font-weight: 800;
    color: $primary-color;
    margin-bottom: 28px;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    &::before {
      content: '';
      display: inline-block;
      width: 8px;
      height: 32px;
      border-radius: 6px;
      background: $accent-bar;
      margin-right: 10px;
    }
  }
  
  .section-header {
    @include flex-between;
    margin-bottom: 36px;
  }
  
  // Scheme Matcher Section
  .scheme-matcher, .matched-schemes, .supplier-network, .tool-card, .profile-section, .metric-card, .documents-section, .reports-section, .settings-section, .enterprise-profile, .section-card {
    background: $card-gradient;
    border-radius: 24px;
    box-shadow: 0 8px 32px rgba($primary-color, 0.10);
    padding: 36px 32px;
    margin-bottom: 36px;
    border: 1.5px solid #e3f0ff;
    transition: box-shadow 0.2s, transform 0.2s;
    &:hover {
      box-shadow: 0 16px 48px rgba($primary-color, 0.13);
      transform: translateY(-2px) scale(1.01);
    }
  }
  
  .scheme-matcher {
    @include section-padding;
    height: 100%;
    
    .eligibility-form {
      margin-top: 16px;
      
      .form-field {
        margin-bottom: 16px;
        
        .MuiTypography-subtitle2 {
          margin-bottom: 8px;
          color: $text-secondary;
        }
        
        .MuiRadio-root.Mui-checked {
          color: $primary-color;
        }
        
        .MuiSelect-select {
          padding: 12px;
        }
      }
    }
  }
  
  .matched-schemes {
    @include section-padding;
    height: 100%;
    
    .schemes-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
      max-height: 400px;
      overflow-y: auto;
      padding-right: 8px;
      
      &::-webkit-scrollbar {
        width: 6px;
      }
      
      &::-webkit-scrollbar-track {
        background: $background-color;
      }
      
      &::-webkit-scrollbar-thumb {
        background-color: rgba($primary-color, 0.3);
        border-radius: 20px;
      }
    }
    
    .scheme-card {
      @include card-hover;
      border-left: 4px solid $primary-color;
      
      .scheme-header {
        @include flex-between;
        margin-bottom: 8px;
      }
      
      .apply-button {
        margin-top: 16px;
        text-transform: none;
      }
    }
  }
  
  // Supplier Network Section
  .supplier-network {
    @include section-padding;
    margin-bottom: 24px;
    
    .map-container {
      height: 400px;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid $border-color;
      
      .map-popup {
        padding: 8px;
        min-width: 150px;
      }
    }
    
    .supplier-grid {
      margin-top: 16px;
    }
    
    .supplier-card {
      @include card-hover;
      height: 100%;
      
      .supplier-header {
        @include flex-between;
        margin-bottom: 12px;
        
        .type-chip {
          background: $primary-color;
          color: #fff;
          font-weight: 600;
        }
      }
      
      .supplier-details {
        margin-bottom: 16px;
      }
      
      .supplier-actions {
        @include flex-between;
        
        .contact-btn {
          border-color: $primary-color;
          color: $primary-color;
          &:hover {
            background: $secondary-color;
            color: #fff;
          }
        }
        
        .direction-btn {
          background-color: $primary-color;
        }
      }
    }
  }
  
  // Tools Grid
  .tools-grid {
    margin-bottom: 24px;
    
    .tool-card {
      @include section-padding;
      @include flex-center;
      flex-direction: column;
      gap: 16px;
      height: 100%;
      text-align: center;
      @include card-hover;
      
      .tool-icon {
        font-size: 56px;
        color: $primary-color;
        margin-bottom: 18px;
      }
      
      &.whatsapp-toolkit {
        .tool-icon {
          color: #25D366; // WhatsApp green
        }
      }
      
      &.material-exchange {
        .tool-icon {
          color: $warning-color;
        }
      }
      
      &.skill-courses {
        .tool-icon {
          color: $purple-color;
        }
      }
      
      .MuiButton-contained {
        margin-top: 8px;
        text-transform: none;
      }
    }
  }
  
  // Metrics Grid
  .metrics-grid {
    margin-bottom: 24px;
    
    .metric-card {
      padding: 20px;
      height: 100%;
      position: relative;
      overflow: hidden;
      @include card-hover;
      
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background-color: var(--metric-color, $primary-color);
      }
      
      .metric-content {
        margin-bottom: 16px;
      }
      
      .metric-header {
        @include flex-between;
        margin-bottom: 16px;
        
        svg {
          color: var(--metric-color, $primary-color);
          font-size: 24px;
        }
      }
      
      .metric-value {
        font-weight: 700;
        margin-bottom: 8px;
      }
      
      .trend-chip {
        &.positive {
          background-color: rgba($success-color, 0.1);
          color: $success-color;
        }
        
        &.negative {
          background-color: rgba($error-color, 0.1);
          color: $error-color;
        }
      }
      
      .metric-progress {
        height: 4px;
        background-color: rgba(var(--metric-color, $primary-color), 0.1);
        
        .MuiLinearProgress-bar {
          background-color: var(--metric-color, $primary-color);
        }
      }
    }
  }
  
  // Profile Section
  .profile-section {
    @include section-padding;
    margin-bottom: 24px;
    
    .profile-header {
      @include flex-between;
      margin-bottom: 32px;
      
      .profile-info {
        display: flex;
        align-items: center;
        gap: 28px;
        
        .company-avatar {
          width: 80px;
          height: 80px;
          border-radius: 20px;
          border: 2.5px solid $primary-color;
          background: #e3f0ff;
          box-shadow: 0 2px 8px rgba($primary-color, 0.07);
        }
        
        .company-details {
          .MuiTypography-h5 {
            color: $primary-color;
            font-size: 1.6rem;
            font-weight: 800;
          }
        }
      }
    }
    
    .profile-divider {
      margin: 24px 0;
      border-color: #e3f0ff;
    }
    
    .profile-stats {
      .stat-item {
        @include flex-center;
        flex-direction: column;
        text-align: center;
        
        .stat-icon {
          color: $primary-color;
          font-size: 2.4rem;
          margin-bottom: 10px;
          background: #e3f0ff;
          border-radius: 50%;
          padding: 10px;
          box-shadow: 0 2px 8px rgba($primary-color, 0.07);
        }
        
        .MuiTypography-h6 {
          color: $primary-color;
          font-size: 1.3rem;
          font-weight: 800;
        }
        
        .MuiTypography-body2 {
          color: $text-secondary;
        }
      }
    }
  }
  
  // Quick Stats
  .quick-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 24px;
    margin-bottom: 24px;
    
    .stat-card {
      background-color: $card-background;
      border-radius: 12px;
      padding: 24px;
      @include card-hover;
      
      .stat-icon {
        color: var(--stat-color, $primary-color);
        font-size: 40px;
        margin-bottom: 16px;
      }
      
      .stat-title {
        color: $text-secondary;
        margin-bottom: 8px;
      }
      
      .stat-value {
        color: $text-primary;
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 8px;
      }
      
      .stat-trend {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.875rem;
        font-weight: 500;
        
        &.positive {
          background-color: rgba($success-color, 0.1);
          color: $success-color;
        }
        
        &.negative {
          background-color: rgba($error-color, 0.1);
          color: $error-color;
        }
      }
    }
  }
  
  // Documents and Deadlines
  .documents-deadlines {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
    margin-bottom: 24px;
    
    .document-list, .deadline-list {
      background-color: $card-background;
      border-radius: 12px;
      padding: 24px;
      
      .list-title {
        margin-bottom: 16px;
        font-weight: 600;
        color: $text-primary;
      }
      
      .list-item {
        padding: 12px 0;
        border-bottom: 1px solid $border-color;
        @include flex-between;
        
        &:last-child {
          border-bottom: none;
        }
        
        .item-info {
          .item-name {
            font-weight: 500;
            margin-bottom: 4px;
          }
          
          .item-meta {
            color: $text-secondary;
            font-size: 0.875rem;
          }
        }
        
        .item-status {
          &.verified {
            color: $success-color;
          }
          
          &.pending {
            color: $warning-color;
          }
          
          &.action_required {
            color: $error-color;
          }
          
          &.high {
            color: $error-color;
          }
          
          &.medium {
            color: $warning-color;
          }
          
          &.low {
            color: $info-color;
          }
        }
      }
    }
  }

  // Enterprise Profile Section
  // =========================================
  .enterprise-profile {
    background-color: $card-background;
    border-radius: $border-radius-lg;
    @include section-padding;
    
    .profile-header {
      @include flex-between;
      margin-bottom: $spacing-lg;
      
      .company-info {
        @include flex-center;
        gap: $spacing-md;
        
        .company-logo {
          width: 80px;
          height: 80px;
          border-radius: $border-radius-md;
          object-fit: cover;
          border: 2px solid $border-color;
        }
        
        .company-details {
          .company-name {
            font-size: 1.5rem;
            font-weight: $font-weight-bold;
            color: $text-primary;
            margin-bottom: $spacing-xs;
          }
          
          .registration-number {
            color: $text-secondary;
            font-size: 0.875rem;
          }
        }
      }
      
      .edit-button {
        color: $primary-color;
      }
    }
    
    .profile-sections {
      margin-top: $spacing-lg;

      .section-card {
        background: rgba($card-background, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba($border-color, 0.1);
        padding: $spacing-lg;
        height: 100%;
        transition: $transition-duration;

        &:hover {
          transform: translateY(-4px);
          box-shadow: $shadow-md;
        }

        .section-title {
          display: flex;
          align-items: center;
          gap: $spacing-sm;
          margin-bottom: $spacing-lg;
          color: $text-primary;

          .section-icon {
            color: $primary-color;
          }
        }

        .info-list {
          .info-item {
            margin-bottom: $spacing-md;
            
            &:last-child {
              margin-bottom: 0;
            }

            .label {
              color: $text-secondary;
              font-size: 0.875rem;
              margin-bottom: $spacing-xs;
            }

            .value {
              color: $text-primary;
              font-weight: $font-weight-medium;
            }

            .MuiChip-root {
              font-size: 0.75rem;
              height: 24px;
            }
          }
        }
      }
    }
  }

  // Documents Section
  // =========================================
  .documents-section {
    .documents-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      
      .document-card {
        background-color: $card-background;
        border-radius: 12px;
        padding: 20px;
        @include card-hover;
        
        .doc-icon {
          color: $primary-color;
          font-size: 32px;
          margin-bottom: 16px;
        }
        
        .doc-title {
          font-weight: 600;
          margin-bottom: 8px;
        }
        
        .doc-meta {
          color: $text-secondary;
          font-size: 0.875rem;
          margin-bottom: 16px;
        }
        
        .doc-actions {
          @include flex-between;
          
          .status-badge {
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 500;
            
            &.valid {
              background-color: rgba($success-color, 0.1);
              color: $success-color;
            }
            
            &.expired {
              background-color: rgba($error-color, 0.1);
              color: $error-color;
            }
            
            &.expiring {
              background-color: rgba($warning-color, 0.1);
              color: $warning-color;
            }
          }
        }
      }
    }
  }

  // Reports Section
  // =========================================
  .reports-section {
    .reports-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      
      .report-card {
        background-color: $card-background;
        border-radius: 12px;
        padding: 24px;
        @include card-hover;
        
        .report-header {
          @include flex-between;
          margin-bottom: 16px;
          
          .report-title {
            font-weight: 600;
            color: $text-primary;
          }
          
          .report-period {
            color: $text-secondary;
            font-size: 0.875rem;
          }
        }
        
        .report-stats {
          margin-bottom: 20px;
          
          .stat-row {
            @include flex-between;
            margin-bottom: 8px;
            
            .stat-label {
              color: $text-secondary;
            }
            
            .stat-value {
              font-weight: 500;
              color: $text-primary;
            }
          }
        }
        
        .report-actions {
          @include flex-between;
          
          .download-btn {
            color: $primary-color;
            
            &:hover {
              background-color: rgba($primary-color, 0.05);
            }
          }
        }
      }
    }
  }

  // Settings Section
  // =========================================
  .settings-section {
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      
      .settings-card {
        background-color: $card-background;
        border-radius: 12px;
        padding: 24px;
        
        .settings-header {
          margin-bottom: 20px;
          
          .settings-title {
            font-weight: 600;
            color: $text-primary;
            margin-bottom: 8px;
          }
          
          .settings-description {
            color: $text-secondary;
            font-size: 0.875rem;
          }
        }
        
        .settings-form {
          .form-group {
            margin-bottom: 20px;
            
            .form-label {
              color: $text-secondary;
              margin-bottom: 8px;
              font-size: 0.875rem;
            }
            
            .form-control {
              width: 100%;
              
              &.switch-control {
                @include flex-between;
                
                .switch-label {
                  color: $text-primary;
                  font-weight: 500;
                }
              }
            }
          }
        }
      }
    }
  }
}

// Media Queries
@media (max-width: $breakpoint-lg) {
  .msme-dashboard {
    .content {
      .dashboard-container {
        padding: 16px;
      }
    }
    
    .profile-section {
      .profile-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
        
        .profile-info {
          width: 100%;
        }
      }
    }
  }
}

@media (max-width: $breakpoint-md) {
  .msme-dashboard {
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }
    
    .supplier-network {
      .map-container {
        height: 300px;
      }
    }
    
    .metrics-grid {
      .metric-card {
        padding: 16px;
      }
    }
    
    .profile-section {
      .profile-header {
        .profile-info {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    }
  }
}

@media (max-width: $breakpoint-sm) {
  .msme-dashboard {
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }
    
    .supplier-network {
      .map-container {
        height: 300px;
      }
    }
    
    .metrics-grid {
      .metric-card {
        padding: 16px;
      }
    }
    
    .profile-section {
      .profile-header {
        .profile-info {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    }
  }
}